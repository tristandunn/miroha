<%# locals: () %>
<div class="h-screen bg-slate-950 text-slate-100 flex" data-controller="world-editor">
  <!-- Main Grid Area -->
  <%= render "grid", current_room: @current_room, surrounding_rooms: @surrounding_rooms %>

  <!-- Compact Sidebar -->
  <div class="w-80 bg-slate-900 h-screen overflow-y-auto flex-shrink-0 border-l border-slate-800 flex flex-col">
    <!-- Status Bar (appears when saving) -->
    <div class="hidden border-b border-slate-800" data-world-editor-target="saveStatusBar">
      <div class="px-4 py-2 text-xs bg-slate-800/50" data-world-editor-target="saveStatus"></div>
    </div>

    <!-- Content Sections -->
    <div class="flex-1 overflow-y-auto">
      <div class="p-4 space-y-4">
        <%= render "description", current_room: @current_room %>
        <%= render "npcs", current_room: @current_room %>
        <%= render "monsters", current_room: @current_room %>
        <%= render "items", current_room: @current_room %>
        <%= render "spawns", current_room: @current_room %>
        <%= render "objects", current_room: @current_room %>
      </div>
    </div>

    <!-- Bottom Info Bar -->
    <div class="border-t border-slate-800 px-4 py-2 bg-slate-900/50 text-xs text-slate-500">
      <span>(<%= @current_room.x %>, <%= @current_room.y %>, <%= @current_room.z %>)</span>
      <% if @current_room.persisted? %>
        <span class="mx-2">â€¢</span>
        <span>#<%= @current_room.id %></span>
      <% end %>
    </div>
  </div>

  <!-- Hidden data for Stimulus -->
  <div class="hidden">
    <div data-world-editor-target="currentRoomId"><%= @current_room.id if @current_room.persisted? %></div>
    <span data-world-editor-target="currentX"><%= @current_room.x %></span>
    <span data-world-editor-target="currentY"><%= @current_room.y %></span>
    <span data-world-editor-target="currentZ"><%= @current_room.z %></span>
  </div>
</div>
