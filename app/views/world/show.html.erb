<%# locals: () %>
<div class="h-screen bg-slate-950 text-slate-100 flex flex-col" data-controller="world-editor">
  <!-- Grid takes full space -->
  <div class="flex-1 relative">
    <%= render "grid", current_room: @current_room, surrounding_rooms: @surrounding_rooms %>

    <!-- Floating coordinate display -->
    <div class="absolute bottom-4 left-4 px-3 py-1.5 bg-slate-900/90 backdrop-blur border border-slate-800 rounded text-xs text-slate-400">
      <span>(<%= @current_room.x %>, <%= @current_room.y %>, <%= @current_room.z %>)</span>
      <% if @current_room.persisted? %>
        <span class="mx-1.5">â€¢</span>
        <span>#<%= @current_room.id %></span>
      <% end %>
    </div>
  </div>

  <!-- Bottom panel for properties -->
  <div class="h-64 border-t border-slate-800 bg-slate-900 flex-shrink-0 overflow-hidden flex flex-col">
    <!-- Status bar -->
    <div class="hidden border-b border-slate-800" data-world-editor-target="saveStatusBar">
      <div class="px-4 py-1.5 text-xs bg-slate-800/50" data-world-editor-target="saveStatus"></div>
    </div>

    <!-- Horizontal scrolling content -->
    <div class="flex-1 overflow-x-auto overflow-y-auto">
      <div class="flex h-full">
        <%= render "description", current_room: @current_room %>
        <%= render "npcs", current_room: @current_room %>
        <%= render "monsters", current_room: @current_room %>
        <%= render "items", current_room: @current_room %>
        <%= render "spawns", current_room: @current_room %>
        <%= render "objects", current_room: @current_room %>
      </div>
    </div>
  </div>

  <!-- Hidden data for Stimulus -->
  <div class="hidden">
    <div data-world-editor-target="currentRoomId"><%= @current_room.id if @current_room.persisted? %></div>
    <span data-world-editor-target="currentX"><%= @current_room.x %></span>
    <span data-world-editor-target="currentY"><%= @current_room.y %></span>
    <span data-world-editor-target="currentZ"><%= @current_room.z %></span>
  </div>
</div>
