<%# locals: () %>
<div class="h-screen bg-gray-900 text-gray-100 flex" data-controller="world-editor">
  <!-- Grid and Description Area -->
  <div class="flex-1 h-screen flex flex-col">
    <%= render "grid", current_room: @current_room, surrounding_rooms: @surrounding_rooms %>
    <%= render "description", current_room: @current_room %>
  </div>

  <!-- Sidebar -->
  <div class="w-96 bg-gray-800 h-screen overflow-y-auto flex-shrink-0">
    <!-- Flash Message Bar -->
    <div class="sticky top-0 z-10 hidden" data-world-editor-target="saveStatusBar">
      <div class="px-6 py-2 text-sm min-h-[2.5rem] flex items-center bg-gray-700 border-b border-gray-600" data-world-editor-target="saveStatus"></div>
    </div>

    <div class="p-6">
      <%= render "npcs", current_room: @current_room %>
      <%= render "monsters", current_room: @current_room %>
      <%= render "items", current_room: @current_room %>
      <%= render "spawns", current_room: @current_room %>
      <%= render "objects", current_room: @current_room %>
    </div>
  </div>

  <!-- Hidden data for Stimulus -->
  <div class="hidden">
    <div data-world-editor-target="currentRoomId"><%= @current_room.id if @current_room.persisted? %></div>
    <span data-world-editor-target="currentX"><%= @current_room.x %></span>
    <span data-world-editor-target="currentY"><%= @current_room.y %></span>
    <span data-world-editor-target="currentZ"><%= @current_room.z %></span>
  </div>
</div>
